<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç–µ—Å—Ç –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        
        .stage-indicator {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stage-btn {
            padding: 12px 25px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
            transition: all 0.3s;
        }
        
        .stage-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .stage-btn.completed {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.2em;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e9ecef;
        }
        
        .stat-label {
            display: block;
            color: #6c757d;
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        #score-value {
            color: #27ae60;
        }
        
        #streak-value {
            color: #e74c3c;
        }
        
        #mode-display {
            background: #3498db;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            display: inline-block;
            font-weight: bold;
        }
        
        .question-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            min-height: 160px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #question {
            font-size: 2em;
            font-weight: bold;
            line-height: 1.4;
        }
        
        .answers {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .answer-btn {
            padding: 20px;
            border: 3px solid #ddd;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            text-align: left;
            font-size: 1.2em;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .answer-btn:hover:not(.disabled) {
            background: #f8f9fa;
            border-color: #aaa;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .answer-btn.selected {
            border-color: #3498db;
            background: #ebf5fb;
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.3);
        }
        
        .answer-btn.correct {
            border-color: #27ae60;
            background: #d5f4e6;
            animation: pulse 0.5s;
        }
        
        .answer-btn.wrong {
            border-color: #e74c3c;
            background: #fadbd8;
            animation: shake 0.5s;
        }
        
        .answer-btn.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        button {
            padding: 16px 32px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        #check-btn {
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
            color: white;
        }
        
        #check-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(39, 174, 96, 0.4);
        }
        
        #next-btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }
        
        #next-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(52, 152, 219, 0.4);
        }
        
        #shuffle-btn {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
        }
        
        #shuffle-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(155, 89, 182, 0.4);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .result-box {
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .result-default {
            background: #f8f9fa;
            color: #495057;
            border: 3px dashed #dee2e6;
        }
        
        .result-correct {
            background: #d4edda;
            color: #155724;
            border: 3px solid #c3e6cb;
            animation: fadeIn 0.5s;
        }
        
        .result-wrong {
            background: #f8d7da;
            color: #721c24;
            border: 3px solid #f5c6cb;
            animation: fadeIn 0.5s;
        }
        
        .completion-message {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #2c3e50;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
            border: 5px solid #ff9a9e;
            animation: celebration 2s infinite;
        }
        
        .completion-title {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #e74c3c;
        }
        
        .completion-text {
            font-size: 1.5em;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .stats-completion {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-top: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes celebration {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .progress-container {
            height: 12px;
            background: #ecf0f1;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 30px;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
        }
        
        .progress-label {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
            font-weight: bold;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 2px solid #eee;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        footer a {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }
        
        footer a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .answers {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .controls {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            #question {
                font-size: 1.5em;
            }
            
            .completion-title {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="stage-indicator">
            <button class="stage-btn active" id="stage1-btn" onclick="switchStage(1)">üéØ 1. –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç</button>
            <button class="stage-btn" id="stage2-btn" onclick="switchStage(2)">üî• 2. –°–ª–æ–∂–Ω—ã–π —Ç–µ—Å—Ç</button>
        </div>
        
        <h1>üìö –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç–µ—Å—Ç —Å–ª–æ–≤</h1>
        <p class="subtitle" id="subtitle">–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç: 20 —Å–ª–æ–≤, —Ä–∞–∑–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞</p>
        
        <div class="stats">
            <div class="stat-box">
                <span class="stat-label">–í–æ–ø—Ä–æ—Å</span>
                <span class="stat-value" id="current">1</span>/<span id="total">20</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</span>
                <span class="stat-value" id="score-value">0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">–°–µ—Ä–∏—è</span>
                <span class="stat-value" id="streak-value">0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">–†–µ–∂–∏–º</span>
                <div id="mode-display">EN ‚Üí RU</div>
            </div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
            <div class="progress-label" id="progress-label">0%</div>
        </div>
        
        <div class="question-box">
            <div id="question">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        
        <div class="answers" id="answers-container">
            <!-- –û—Ç–≤–µ—Ç—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>
        
        <div class="result-box result-default" id="result">
            –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞
        </div>
        
        <div class="controls">
            <button id="check-btn">‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
            <button id="next-btn" disabled>‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</button>
            <button id="shuffle-btn">üîÄ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –≤—Å—ë</button>
        </div>
        
        <div id="completion-section" style="display: none;">
            <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ -->
        </div>
        
        <footer>
            <p>–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω —Å –ª—é–±–æ–≤—å—é –¥–ª—è –ö–∞—Ä–∏–Ω–æ—á–∫–∏ ‚ù§Ô∏è ‚Ä¢ <a href="https://github.com/scroll94/kapurina" target="_blank">GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</a></p>
        </footer>
    </div>

    <script>
        // –ù–û–í–´–ï –°–õ–û–í–ê (20 —à—Ç—É–∫)
        const basicWords = [
            { en: "sleep rough", ru: "—Å–ø–∞—Ç—å –Ω–∞ —É–ª–∏—Ü–µ" },
            { en: "grubby", ru: "–≥—Ä—è–∑–Ω—ã–π" },
            { en: "relucant", ru: "–Ω–µ–æ—Ö–æ—Ç–Ω—ã–π" },
            { en: "foster home", ru: "–ø—Ä–∏–µ–º–Ω–∞—è —Å–µ–º—å—è" },
            { en: "fixed address", ru: "–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∞–¥—Ä–µ—Å" },
            { en: "sleeping bag", ru: "—Å–ø–∞–ª—å–Ω—ã–π –º–µ—à–æ–∫" },
            { en: "shiver", ru: "–¥—Ä–æ–∂–∞—Ç—å" },
            { en: "temporary", ru: "–≤—Ä–µ–º–µ–Ω–Ω—ã–π" },
            { en: "accommodation", ru: "–∂–∏–ª—å–µ" },
            { en: "abandoned", ru: "–∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π" },
            { en: "warehouse", ru: "—Å–∫–ª–∞–¥" },
            { en: "cramped", ru: "—Ç–µ—Å–Ω—ã–π" },
            { en: "drug addict", ru: "–Ω–∞—Ä–∫–æ–º–∞–Ω" },
            { en: "traffic fumes", ru: "–≤—ã—Ö–ª–æ–ø–Ω—ã–µ –≥–∞–∑—ã" },
            { en: "deafening", ru: "–æ–≥–ª—É—à–∏—Ç–µ–ª—å–Ω—ã–π" },
            { en: "choke", ru: "–∑–∞–¥—ã—Ö–∞—Ç—å—Å—è" },
            { en: "begging", ru: "–ø–æ–ø—Ä–æ—à–∞–π–Ω–∏—á–µ—Å—Ç–≤–æ" },
            { en: "suburbs", ru: "–ø—Ä–∏–≥–æ—Ä–æ–¥—ã" },
            { en: "dignity", ru: "–¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ" },
            { en: "vicious circle", ru: "–∑–∞–º–∫–Ω—É—Ç—ã–π –∫—Ä—É–≥" }
        ];

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let currentStage = 1;
        let currentQuestionIndex = 0;
        let score = 0;
        let correctStreak = 0;
        let selectedAnswer = null;
        let isAnswered = false;
        let totalQuestionsNeeded = 0;
        let completedStage1 = false;
        
        let currentWords = [];
        let shuffledWords = [];
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const questionEl = document.getElementById('question');
        const answersContainer = document.getElementById('answers-container');
        const resultEl = document.getElementById('result');
        const currentEl = document.getElementById('current');
        const scoreEl = document.getElementById('score-value');
        const streakEl = document.getElementById('streak-value');
        const totalEl = document.getElementById('total');
        const modeDisplay = document.getElementById('mode-display');
        const progressBar = document.getElementById('progress-bar');
        const progressLabel = document.getElementById('progress-label');
        const checkBtn = document.getElementById('check-btn');
        const nextBtn = document.getElementById('next-btn');
        const shuffleBtn = document.getElementById('shuffle-btn');
        const stage1Btn = document.getElementById('stage1-btn');
        const stage2Btn = document.getElementById('stage2-btn');
        const subtitleEl = document.getElementById('subtitle');
        const completionSection = document.getElementById('completion-section');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            switchStage(1);
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            checkBtn.addEventListener('click', checkAnswer);
            nextBtn.addEventListener('click', nextQuestion);
            shuffleBtn.addEventListener('click', shuffleAll);
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞–¥–∏–∏
        function switchStage(stage) {
            currentStage = stage;
            currentQuestionIndex = 0;
            score = 0;
            correctStreak = 0;
            selectedAnswer = null;
            isAnswered = false;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞–¥–∏–π
            stage1Btn.classList.remove('active', 'completed');
            stage2Btn.classList.remove('active', 'completed');
            
            if (stage === 1) {
                stage1Btn.classList.add('active');
                currentWords = basicWords;
                totalQuestionsNeeded = currentWords.length;
                subtitleEl.textContent = `–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç: ${totalQuestionsNeeded} —Å–ª–æ–≤, —Ä–∞–∑–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞`;
                totalEl.textContent = totalQuestionsNeeded;
            } else {
                stage2Btn.classList.add('active');
                if (completedStage1) {
                    stage1Btn.classList.add('completed');
                }
                currentWords = basicWords; // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¢–ï –ñ–ï 20 —Å–ª–æ–≤
                totalQuestionsNeeded = 30; // –ù—É–∂–Ω–æ 30 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
                subtitleEl.textContent = "–°–ª–æ–∂–Ω—ã–π —Ç–µ—Å—Ç: 30 –≤–æ–ø—Ä–æ—Å–æ–≤, –ø–æ—Ö–æ–∂–∏–µ –æ—Ç–≤–µ—Ç—ã, —Å–ª—É—á–∞–π–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è";
                totalEl.textContent = "30";
            }
            
            shuffleAll();
            updateScoreDisplay();
            loadQuestion();
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
        function loadQuestion() {
            if (currentStage === 2 && score >= totalQuestionsNeeded) {
                showCompletionMessage();
                return;
            }
            
            // –î–ª—è 2-–π —Å—Ç–∞–¥–∏–∏ –±–µ—Ä–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ –∏–∑ —Å–ø–∏—Å–∫–∞
            let word;
            if (currentStage === 1) {
                word = shuffledWords[currentQuestionIndex];
            } else {
                // –î–ª—è 2-–π —Å—Ç–∞–¥–∏–∏ - —Å–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ –∏–∑ —Å–ø–∏—Å–∫–∞
                word = basicWords[Math.floor(Math.random() * basicWords.length)];
            }
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞
            let mode;
            if (currentStage === 1) {
                // –í 1-–π —Å—Ç–∞–¥–∏–∏ —á–µ—Ä–µ–¥—É–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                mode = currentQuestionIndex % 2 === 0 ? 'en-ru' : 'ru-en';
            } else {
                // –í–æ 2-–π —Å—Ç–∞–¥–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                mode = Math.random() > 0.5 ? 'en-ru' : 'ru-en';
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å
            questionEl.textContent = mode === 'en-ru' ? word.en : word.ru;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞
            modeDisplay.textContent = mode === 'en-ru' ? 'EN ‚Üí RU' : 'RU ‚Üí EN';
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
            generateAnswers(word, mode);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            selectedAnswer = null;
            isAnswered = false;
            resultEl.textContent = currentStage === 1 ? '–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞' : '–í–Ω–∏–º–∞–Ω–∏–µ! –û—Ç–≤–µ—Ç—ã –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏!';
            resultEl.className = 'result-box result-default';
            checkBtn.disabled = false;
            nextBtn.disabled = true;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            if (currentStage === 1) {
                currentEl.textContent = currentQuestionIndex + 1;
            } else {
                currentEl.textContent = score + 1;
            }
            updateProgressBar();
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Ö–æ–∂–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
        function getSimilarAnswers(correctAnswer, mode) {
            const similarPairs = {
                // –ü–æ—Ö–æ–∂–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ
                "sleep rough": ["sleep outside", "sleep on streets", "sleep in the open", "sleep homeless", "sleep outdoors"],
                "grubby": ["dirty", "grimy", "filthy", "unwashed", "muddy"],
                "relucant": ["unwilling", "hesitant", "resistant", "averse", "disinclined"],
                "foster home": ["foster family", "adoptive home", "care home", "children's home", "foster care"],
                "fixed address": ["permanent address", "stable address", "regular address", "home address", "permanent residence"],
                "sleeping bag": ["sleep sack", "bedroll", "camping bag", "sleeping roll", "bivvy bag"],
                "shiver": ["tremble", "shake", "quiver", "vibrate", "shudder"],
                "temporary": ["provisional", "short-term", "interim", "makeshift", "transient"],
                "accommodation": ["housing", "lodging", "shelter", "living space", "dwelling"],
                "abandoned": ["deserted", "forsaken", "derelict", "vacated", "left empty"],
                "warehouse": ["storage", "depot", "storehouse", "warehouse facility", "distribution center"],
                "cramped": ["crowded", "tight", "confined", "packed", "overcrowded"],
                "drug addict": ["drug user", "junkie", "substance abuser", "addict", "drug dependent"],
                "traffic fumes": ["exhaust fumes", "vehicle emissions", "car exhaust", "pollution", "smog"],
                "deafening": ["ear-splitting", "thunderous", "very loud", "overwhelmingly loud", "earsplitting"],
                "choke": ["suffocate", "strangle", "gasp", "struggle to breathe", "asphyxiate"],
                "begging": ["panhandling", "asking for money", "soliciting", "cadging", "mooching"],
                "suburbs": ["outskirts", "residential areas", "suburban areas", "commuter towns", "edge of city"],
                "dignity": ["self-respect", "pride", "self-worth", "honor", "self-esteem"],
                "vicious circle": ["vicious cycle", "endless loop", "downward spiral", "self-perpetuating cycle", "circular problem"],
                
                // –ü–æ—Ö–æ–∂–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–∏–µ
                "—Å–ø–∞—Ç—å –Ω–∞ —É–ª–∏—Ü–µ": ["–Ω–æ—á–µ–≤–∞—Ç—å –Ω–∞ —É–ª–∏—Ü–µ", "–∂–∏—Ç—å –Ω–∞ —É–ª–∏—Ü–µ", "—Å–ø–∞—Ç—å –ø–æ–¥ –æ—Ç–∫—Ä—ã—Ç—ã–º –Ω–µ–±–æ–º", "–Ω–æ—á–µ–≤–∞—Ç—å –ø–æ–¥ –º–æ—Å—Ç–æ–º", "—Å–ø–∞—Ç—å –≤ –ø–æ–¥–≤–æ—Ä–æ—Ç–Ω–µ"],
                "–≥—Ä—è–∑–Ω—ã–π": ["—á—É–º–∞–∑—ã–π", "–∏—Å–ø–∞—á–∫–∞–Ω–Ω—ã–π", "–∑–∞–ø–∞—á–∫–∞–Ω–Ω—ã–π", "–Ω–µ–º—ã—Ç—ã–π", "–∑–∞—Å–∞–ª–µ–Ω–Ω—ã–π"],
                "–Ω–µ–æ—Ö–æ—Ç–Ω—ã–π": ["–Ω–µ–∂–µ–ª–∞—é—â–∏–π", "–≤—ã–Ω—É–∂–¥–µ–Ω–Ω—ã–π", "—Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è—é—â–∏–π—Å—è", "–ø—Ä–æ—Ç–∏–≤ –≤–æ–ª–∏", "–±–µ–∑ —ç–Ω—Ç—É–∑–∏–∞–∑–º–∞"],
                "–ø—Ä–∏–µ–º–Ω–∞—è —Å–µ–º—å—è": ["–ø—Ä–∏—ë–º–Ω—ã–µ —Ä–æ–¥–∏—Ç–µ–ª–∏", "–æ–ø–µ–∫—É–Ω—Å–∫–∞—è —Å–µ–º—å—è", "–∑–∞–º–µ—â–∞—é—â–∞—è —Å–µ–º—å—è", "—Ñ–æ—Å—Ç–µ—Ä–Ω–∞—è —Å–µ–º—å—è", "—Å–µ–º—å—è –æ–ø–µ–∫—É–Ω–æ–≤"],
                "–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∞–¥—Ä–µ—Å": ["—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å", "–ø—Ä–æ–ø–∏—Å–∫–∞", "–º–µ—Å—Ç–æ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞", "–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞", "–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å"],
                "—Å–ø–∞–ª—å–Ω—ã–π –º–µ—à–æ–∫": ["—Å–ø–∞–ª—å–Ω–∏–∫", "–ø–æ—Ö–æ–¥–Ω—ã–π –º–µ—à–æ–∫", "–º–µ—à–æ–∫ –¥–ª—è —Å–Ω–∞", "—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–µ—à–æ–∫", "—Å–ø–∞–ª—å–Ω—ã–π –º—ñ—à–æ–∫"],
                "–¥—Ä–æ–∂–∞—Ç—å": ["—Ç—Ä—è—Å—Ç–∏—Å—å", "—Ç—Ä–µ–ø–µ—Ç–∞—Ç—å", "—Å–æ—Ç—Ä—è—Å–∞—Ç—å—Å—è", "–≤–∏–±—Ä–∏—Ä–æ–≤–∞—Ç—å", "–∑—è–±–Ω—É—Ç—å"],
                "–≤—Ä–µ–º–µ–Ω–Ω—ã–π": ["–Ω–µ–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π", "–ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–π", "–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π", "–∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π", "–ø—Ä–µ—Ö–æ–¥—è—â–∏–π"],
                "–∂–∏–ª—å–µ": ["–∂–∏–ª–ø–ª–æ—â–∞–¥—å", "–∫–≤–∞—Ä—Ç–∏—Ä–∞", "–¥–æ–º", "–ø–æ–º–µ—â–µ–Ω–∏–µ –¥–ª—è –∂–∏–ª—å—è", "–∫—Ä—ã—à–∞ –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π"],
                "–∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π": ["–ø–æ–∫–∏–Ω—É—Ç—ã–π", "–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π", "–ø—É—Å—Ç—É—é—â–∏–π", "–±—Ä–æ—à–µ–Ω–Ω—ã–π", "–∑–∞–±—ã—Ç—ã–π"],
                "—Å–∫–ª–∞–¥": ["—Å–∫–ª–∞–¥—Å–∫–æ–µ –ø–æ–º–µ—â–µ–Ω–∏–µ", "—Ö—Ä–∞–Ω–∏–ª–∏—â–µ", "–∫–ª–∞–¥–æ–≤–∫–∞", "—Å–∫–ª–∞–¥—Å–∫–æ–π –∫–æ–º–ø–ª–µ–∫—Å", "–±–∞–∑–∞"],
                "—Ç–µ—Å–Ω—ã–π": ["—É–∑–∫–∏–π", "–º–∞–ª–µ–Ω—å–∫–∏–π", "–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã–π", "–Ω–∞–±–∏—Ç—ã–π", "–¥—É—à–Ω—ã–π"],
                "–Ω–∞—Ä–∫–æ–º–∞–Ω": ["–∑–∞–≤–∏—Å–∏–º—ã–π", "—Ç–æ–∫—Å–∏–∫–æ–º–∞–Ω", "–Ω–∞—Ä–∫–æ–∑–∞–≤–∏—Å–∏–º—ã–π", "–Ω–∞—Ä–∫–æ—à–∞", "–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –Ω–∞—Ä–∫–æ—Ç–∏–∫–æ–≤"],
                "–≤—ã—Ö–ª–æ–ø–Ω—ã–µ –≥–∞–∑—ã": ["–≤—ã—Ö–ª–æ–ø", "–∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –≥–∞–∑—ã", "–æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –≥–∞–∑—ã", "–¥—ã–º –∏–∑ —Ç—Ä—É–±—ã", "–≥–∞–∑—ã –æ—Ç –º–∞—à–∏–Ω"],
                "–æ–≥–ª—É—à–∏—Ç–µ–ª—å–Ω—ã–π": ["–≥—Ä–æ–º–æ–ø–æ–¥–æ–±–Ω—ã–π", "–≥—Ä–æ–º–∫–∏–π", "—à—É–º–Ω—ã–π", "–∑–≤–µ–Ω—è—â–∏–π –≤ —É—à–∞—Ö", "—É—à–∞–º –±–æ–ª—å–Ω–æ"],
                "–∑–∞–¥—ã—Ö–∞—Ç—å—Å—è": ["–Ω–µ —Ö–≤–∞—Ç–∞—Ç—å –≤–æ–∑–¥—É—Ö–∞", "–ø–æ–¥–∞–≤–∏—Ç—å—Å—è", "—Ö—Ä–∏–ø–µ—Ç—å", "–ª–æ–≤–∏—Ç—å –≤–æ–∑–¥—É—Ö —Ä—Ç–æ–º", "–≥–∞—Å–Ω—É—Ç—å"],
                "–ø–æ–ø—Ä–æ—à–∞–π–Ω–∏—á–µ—Å—Ç–≤–æ": ["–Ω–∏—â–µ–Ω—Å—Ç–≤–æ", "–ø—Ä–æ—à–µ–Ω–∏–µ –º–∏–ª–æ—Å—Ç—ã–Ω–∏", "–≤—ã–ø—Ä–∞—à–∏–≤–∞–Ω–∏–µ –¥–µ–Ω–µ–≥", "–∫–ª—è–Ω—á–µ–Ω—å–µ", "–ø–æ–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤–æ"],
                "–ø—Ä–∏–≥–æ—Ä–æ–¥—ã": ["–æ–∫—Ä–∞–∏–Ω—ã", "–ø—Ä–µ–¥–º–µ—Å—Ç—å—è", "—Å–ø–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã", "–ø—Ä–∏–≥–æ—Ä–æ–¥–Ω–∞—è –∑–æ–Ω–∞", "–æ–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç–∏"],
                "–¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ": ["—Å–∞–º–æ—É–≤–∞–∂–µ–Ω–∏–µ", "–≥–æ—Ä–¥–æ—Å—Ç—å", "—á—É–≤—Å—Ç–≤–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞", "—á–µ—Å—Ç—å", "—Å–∞–º–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å"],
                "–∑–∞–º–∫–Ω—É—Ç—ã–π –∫—Ä—É–≥": ["–ø–æ—Ä–æ—á–Ω—ã–π –∫—Ä—É–≥", "–±–µ–∑–≤—ã—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ", "—Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞", "—Ç—É–ø–∏–∫", "–±–µ–∑–≤—ã—Ö–æ–¥–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è"]
            };
            
            return similarPairs[correctAnswer] || [];
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
        function generateAnswers(correctWord, mode) {
            answersContainer.innerHTML = '';
            
            // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            const correctAnswer = mode === 'en-ru' ? correctWord.ru : correctWord.en;
            
            // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Ö–æ–∂–∏–µ –æ—Ç–≤–µ—Ç—ã
            let similarOptions = getSimilarAnswers(correctAnswer, mode);
            
            // –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–æ—Ö–æ–∂–∏—Ö, –¥–æ–±–∞–≤–ª—è–µ–º –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–∑ —Å–ø–∏—Å–∫–∞
            while (similarOptions.length < 4) {
                const randomWord = basicWords[Math.floor(Math.random() * basicWords.length)];
                const wrongAnswer = mode === 'en-ru' ? randomWord.ru : randomWord.en;
                if (wrongAnswer !== correctAnswer && !similarOptions.includes(wrongAnswer)) {
                    similarOptions.push(wrongAnswer);
                }
                // –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
                if (similarOptions.length >= 10) break;
            }
            
            // –ë–µ—Ä–µ–º 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏–∑ –ø–æ—Ö–æ–∂–∏—Ö
            let wrongAnswers = similarOptions.slice(0, 4);
            
            // –°–º–µ—à–∏–≤–∞–µ–º –≤—Å–µ –æ—Ç–≤–µ—Ç—ã (–≤—Å–µ–≥–æ 5: 1 –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π + 4 –ø–æ—Ö–æ–∂–∏—Ö)
            let allAnswers = [correctAnswer, ...wrongAnswers];
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –æ—Ç–≤–µ—Ç—ã
            for (let i = allAnswers.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [allAnswers[i], allAnswers[j]] = [allAnswers[j], allAnswers[i]];
            }
            
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
            allAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer;
                
                button.addEventListener('click', () => {
                    if (isAnswered) return;
                    
                    // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —É –≤—Å–µ—Ö
                    document.querySelectorAll('.answer-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    
                    // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π
                    button.classList.add('selected');
                    selectedAnswer = answer;
                });
                
                answersContainer.appendChild(button);
            });
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
        function checkAnswer() {
            if (!selectedAnswer || isAnswered) return;
            
            // –ù–∞—Ö–æ–¥–∏–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ –ø–æ –≤–æ–ø—Ä–æ—Å—É
            const questionText = questionEl.textContent;
            let correctWord;
            let mode = modeDisplay.textContent === 'EN ‚Üí RU' ? 'en-ru' : 'ru-en';
            
            if (mode === 'en-ru') {
                correctWord = basicWords.find(w => w.en === questionText);
            } else {
                correctWord = basicWords.find(w => w.ru === questionText);
            }
            
            const correctAnswer = mode === 'en-ru' ? correctWord.ru : correctWord.en;
            const isCorrect = selectedAnswer === correctAnswer;
            
            // –ü–æ–º–µ—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç—ã
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.classList.add('disabled');
                if (btn.textContent === correctAnswer) {
                    btn.classList.add('correct');
                } else if (btn.textContent === selectedAnswer && !isCorrect) {
                    btn.classList.add('wrong');
                }
                btn.classList.add('selected');
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            if (isCorrect) {
                score++;
                correctStreak++;
                
                // –î–ª—è 2-–π —Å—Ç–∞–¥–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–∏
                if (currentStage === 2 && score >= totalQuestionsNeeded) {
                    setTimeout(() => showCompletionMessage(), 1000);
                }
                
                resultEl.textContent = currentStage === 1 ? 
                    '‚úÖ –í–µ—Ä–Ω–æ! –û—Ç–ª–∏—á–Ω–æ!' : 
                    `‚úÖ –í–µ—Ä–Ω–æ! –°–µ—Ä–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correctStreak}`;
                resultEl.className = 'result-box result-correct';
            } else {
                correctStreak = 0;
                resultEl.textContent = `‚ùå –ù–µ–≤–µ—Ä–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}`;
                resultEl.className = 'result-box result-wrong';
            }
            
            updateScoreDisplay();
            isAnswered = true;
            checkBtn.disabled = true;
            nextBtn.disabled = false;
        }
        
        // –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
        function nextQuestion() {
            if (currentStage === 2 && score >= totalQuestionsNeeded) {
                showCompletionMessage();
                return;
            }
            
            if (currentStage === 1) {
                currentQuestionIndex++;
                if (currentQuestionIndex >= shuffledWords.length) {
                    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ 1-–π —Å—Ç–∞–¥–∏–∏
                    completedStage1 = true;
                    showStage1Completion();
                    return;
                }
            }
            
            loadQuestion();
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ 1-–π —Å—Ç–∞–¥–∏–∏
        function showStage1Completion() {
            const completionHTML = `
                <div class="completion-message">
                    <div class="completion-title">üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</div>
                    <div class="completion-text">
                        <p>–¢—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç! üåü</p>
                        <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: <strong>${score} –∏–∑ ${shuffledWords.length}</strong> –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</p>
                        <p>–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ —Å–ª–æ–∂–Ω–æ–º—É —Ç–µ—Å—Ç—É! üî•</p>
                    </div>
                    <button onclick="switchStage(2)" style="margin-top: 20px; padding: 15px 30px; font-size: 1.2em; background: #e74c3c; color: white; border: none; border-radius: 10px; cursor: pointer;">
                        üöÄ –ù–∞—á–∞—Ç—å —Å–ª–æ–∂–Ω—ã–π —Ç–µ—Å—Ç
                    </button>
                </div>
            `;
            
            completionSection.innerHTML = completionHTML;
            completionSection.style.display = 'block';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            document.querySelector('.question-box').style.display = 'none';
            document.querySelector('.answers').style.display = 'none';
            document.querySelector('.result-box').style.display = 'none';
            document.querySelector('.controls').style.display = 'none';
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
        function showCompletionMessage() {
            let completionHTML = '';
            
            if (currentStage === 1) {
                completionHTML = `
                    <div class="completion-message">
                        <div class="completion-title">üéâ –£–º–Ω–∏—á–∫–∞, –ö–∞—Ä–∏–Ω–æ—á–∫–∞!</div>
                        <div class="completion-text">
                            <p>–¢—ã —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–∏–ª–∞ –∑–∞–¥–∞–Ω–∏–µ! ü•≥</p>
                            <p>–¢—ã –º–æ—è –ø—Ä–∏–Ω—Ü–µ—Å—Å–∞! üëëüíñ</p>
                            <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: <strong>${score} –∏–∑ ${shuffledWords.length}</strong> –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</p>
                            <p style="font-size: 1.8em; margin-top: 20px;">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</p>
                        </div>
                        <div class="stats-completion">
                            <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</h3>
                            <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${score}/${shuffledWords.length}</p>
                            <p>–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: ${Math.round((score / shuffledWords.length) * 100)}%</p>
                            <p>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–µ—Ä–∏—è: ${correctStreak}</p>
                        </div>
                        <button onclick="restartStage()" style="margin-top: 20px; padding: 15px 30px; font-size: 1.2em; background: #27ae60; color: white; border: none; border-radius: 10px; cursor: pointer;">
                            üîÑ –ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑
                        </button>
                    </div>
                `;
            } else {
                completionHTML = `
                    <div class="completion-message">
                        <div class="completion-title">üèÜ –ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! –ö–∞—Ä–∏–Ω–æ—á–∫–∞!</div>
                        <div class="completion-text">
                            <p>–¢—ã –ø—Ä–æ—à–ª–∞ —Å–ª–æ–∂–Ω—ã–π —Ç–µ—Å—Ç –∏–∑ 30 –≤–æ–ø—Ä–æ—Å–æ–≤! üåü</p>
                            <p>–° –ø–æ—Ö–æ–∂–∏–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –∏ –º–µ–Ω—è—é—â–∏–º–∏—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏!</p>
                            <p>–¢—ã –ø—Ä–æ—Å—Ç–æ –≥–µ–Ω–∏–π! üß†üí´</p>
                            <p style="font-size: 2em; margin-top: 20px; color: #e74c3c;">üíñüíñüíñ –ú–æ—è —É–º–Ω–∏—á–∫–∞! üíñüíñüíñ</p>
                            <p style="font-size: 1.8em; margin-top: 10px;">–¢—ã –º–æ—è –ø—Ä–∏–Ω—Ü–µ—Å—Å–∞! üë∏‚ú®</p>
                        </div>
                        <div class="stats-completion">
                            <h3>–ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</h3>
                            <p>–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç: ${completedStage1 ? '–ü—Ä–æ–π–¥–µ–Ω ‚úÖ' : '–ù–µ –ø—Ä–æ–π–¥–µ–Ω'}</p>
                            <p>–°–ª–æ–∂–Ω—ã–π —Ç–µ—Å—Ç: –ü—Ä–æ–π–¥–µ–Ω! ‚úÖ (${score}/30)</p>
                            <p>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–µ—Ä–∏—è: ${correctStreak}</p>
                            <p>–¢—ã –Ω–∞—Å—Ç–æ—è—â–∞—è —á–µ–º–ø–∏–æ–Ω–∫–∞! üèÖ</p>
                        </div>
                        <div style="margin-top: 20px; display: flex; gap: 15px; justify-content: center;">
                            <button onclick="switchStage(1)" style="padding: 15px 25px; font-size: 1.1em; background: #3498db; color: white; border: none; border-radius: 10px; cursor: pointer;">
                                üîô –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç
                            </button>
                            <button onclick="restartStage()" style="padding: 15px 25px; font-size: 1.1em; background: #9b59b6; color: white; border: none; border-radius: 10px; cursor: pointer;">
                                üîÑ –ï—â—ë —Ä–∞–∑ —Å–ª–æ–∂–Ω—ã–π
                            </button>
                        </div>
                    </div>
                `;
            }
            
            completionSection.innerHTML = completionHTML;
            completionSection.style.display = 'block';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            document.querySelector('.question-box').style.display = 'none';
            document.querySelector('.answers').style.display = 'none';
            document.querySelector('.result-box').style.display = 'none';
            document.querySelector('.controls').style.display = 'none';
        }
        
        // –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞–¥–∏—é
        function restartStage() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            document.querySelector('.question-box').style.display = 'flex';
            document.querySelector('.answers').style.display = 'grid';
            document.querySelector('.result-box').style.display = 'flex';
            document.querySelector('.controls').style.display = 'flex';
            completionSection.style.display = 'none';
            
            switchStage(currentStage);
        }
        
        // –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –≤—Å—ë
        function shuffleAll() {
            if (currentStage === 1) {
                shuffledWords = [...basicWords];
                for (let i = shuffledWords.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffledWords[i], shuffledWords[j]] = [shuffledWords[j], shuffledWords[i]];
                }
            }
            currentQuestionIndex = 0;
            score = 0;
            correctStreak = 0;
            updateScoreDisplay();
            loadQuestion();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
            const originalText = shuffleBtn.textContent;
            shuffleBtn.textContent = 'üîÄ –ü–µ—Ä–µ–º–µ—à–∞–Ω–æ!';
            setTimeout(() => {
                shuffleBtn.textContent = originalText;
            }, 1000);
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á—ë—Ç–∞
        function updateScoreDisplay() {
            scoreEl.textContent = score;
            streakEl.textContent = correctStreak;
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
        function updateProgressBar() {
            const progress = currentStage === 1 
                ? ((currentQuestionIndex + 1) / shuffledWords.length) * 100
                : (score / totalQuestionsNeeded) * 100;
            
            progressBar.style.width = `${progress}%`;
            progressLabel.textContent = `${Math.round(progress)}%`;
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
